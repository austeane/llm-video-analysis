{
  "$schema": "https://schema.railpack.com",
  "provider": "node",
  "steps": {
    "build": {
      "inputs": [
        {
          "step": "install"
        }
      ],
      "commands": [
        "bun run build"
      ]
    },
    "prune": {
      "inputs": [
        {
          "step": "build"
        }
      ],
      "commands": [
        "rm -rf node_modules",
        "bun install --production --ignore-scripts"
      ],
      "deployOutputs": [
        {
          "include": [
            "dist",
            "server.ts",
            "package.json",
            "bun.lock",
            "node_modules",
            "public"
          ],
          "exclude": [
            "node_modules/.cache"
          ]
        }
      ]
    }
  },
  "deploy": {
    "inputs": [
      {
        "step": "packages:mise",
        "include": [
          "/mise/shims",
          "/mise/installs",
          "/usr/local/bin/mise",
          "/etc/mise/config.toml",
          "/root/.local/state/mise"
        ]
      },
      {
        "step": "prune",
        "include": [
          "."
        ]
      }
    ]
  }
}
